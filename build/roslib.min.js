!function i(r,s,o){function a(t,e){if(!s[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}n=s[t]={exports:{}},r[t][0].call(n.exports,function(e){return a(r[t][1][e]||e)},n,n.exports,i,r,s,o)}return s[t].exports}for(var c="function"==typeof require&&require,e=0;e<o.length;e++)a(o[e]);return a}({1:[function(e,n,t){!function(e,E){"use strict";var A=Math.pow(2,-24),r=Math.pow(2,32),d=Math.pow(2,53);var t={encode:function(e){var o,a=new ArrayBuffer(256),c=new DataView(a),l=0;function u(e){for(var t=a.byteLength,n=l+e;t<n;)t*=2;if(t!==a.byteLength)for(var i=c,r=(a=new ArrayBuffer(t),c=new DataView(a),l+3>>2),s=0;s<r;++s)c.setUint32(4*s,i.getUint32(4*s));return o=e,c}function h(){l+=o}function f(e){h(u(1).setUint8(l,e))}function p(e){for(var t=u(e.length),n=0;n<e.length;++n)t.setUint8(l+n,e[n]);h()}function m(e,t){var n,i;t<24?f(e<<5|t):t<256?(f(e<<5|24),f(t)):t<65536?(f(e<<5|25),i=t,h(u(2).setUint16(l,i))):t<4294967296?(f(e<<5|26),i=t,h(u(4).setUint32(l,i))):(f(e<<5|27),e=((e=t)-(t=t%r))/r,(n=u(8)).setUint32(l,e),n.setUint32(l+4,t),h())}if(!function e(t){var n;if(!1===t)return f(244);if(!0===t)return f(245);if(null===t)return f(246);if(t===E)return f(247);switch(typeof t){case"number":if(Math.floor(t)===t){if(0<=t&&t<=d)return m(0,t);if(-d<=t&&t<0)return m(1,-(t+1))}return f(251),n=t,h(u(8).setFloat64(l,n));case"string":for(var i=[],r=0;r<t.length;++r){var s=t.charCodeAt(r);s<128?i.push(s):(s<2048?i.push(192|s>>6):(s<55296?i.push(224|s>>12):(s=65536+((s=(1023&s)<<10)|1023&t.charCodeAt(++r)),i.push(240|s>>18),i.push(128|s>>12&63)),i.push(128|s>>6&63)),i.push(128|63&s))}return m(3,i.length),p(i);default:if(Array.isArray(t))for(m(4,o=t.length),r=0;r<o;++r)e(t[r]);else if(t instanceof Uint8Array)m(2,t.length),p(t);else{var o,a=Object.keys(t);for(m(5,o=a.length),r=0;r<o;++r){var c=a[r];e(c),e(t[c])}}}}(e),"slice"in a)return a.slice(0,l);for(var e=new ArrayBuffer(l),t=new DataView(e),n=0;n<l;++n)t.setUint8(n,c.getUint8(n));return e},decode:function(t,v,y){var g=new DataView(t),b=0;function w(e,t){return b+=t,e}function _(e){return w(new Uint8Array(t,b,e),e)}function k(){return w(g.getUint8(b),1)}function T(){return w(g.getUint16(b),2)}function n(){return w(g.getUint32(b),4)}function x(){return 255===g.getUint8(b)&&(b+=1,1)}function S(e){if(e<24)return e;if(24===e)return k();if(25===e)return T();if(26===e)return n();if(27===e)return n()*r+n();if(31===e)return-1;throw"Invalid length encoding"}function L(e){var t=k();if(255===t)return-1;var n=S(31&t);if(n<0||t>>5!==e)throw"Invalid indefinite length element";return n}function M(e,t){for(var n=0;n<t;++n){var i=k();128&i&&(i<224?(i=(31&i)<<6|63&k(),--t):i<240?(i=(15&i)<<12|(63&k())<<6|63&k(),t-=2):(i=(15&i)<<18|(63&k())<<12|(63&k())<<6|63&k(),t-=3)),i<65536?e.push(i):(i-=65536,e.push(55296|i>>10),e.push(56320|1023&i))}}"function"!=typeof v&&(v=function(e){return e}),"function"!=typeof y&&(y=function(){return E});var e=function e(){var t,n,i=k(),r=i>>5,i=31&i;if(7==r)switch(i){case 25:var s=new ArrayBuffer(4),s=new DataView(s),o=T(),a=31744&o,c=1023&o;if(31744===a)a=261120;else if(0!==a)a+=114688;else if(0!=c)return c*A;return s.setUint32(0,(32768&o)<<16|a<<13|c<<13),s.getFloat32(0);case 26:return w(g.getFloat32(b),4);case 27:return w(g.getFloat64(b),8)}if((t=S(i))<0&&(r<2||6<r))throw"Invalid length";switch(r){case 0:return t;case 1:return-1-t;case 2:if(t<0){for(var l=[],u=0;0<=(t=L(r));)u+=t,l.push(_(t));for(var h=new Uint8Array(u),f=0,p=0;p<l.length;++p)h.set(l[p],f),f+=l[p].length;return h}return _(t);case 3:var m=[];if(t<0)for(;0<=(t=L(r));)M(m,t);else M(m,t);return String.fromCharCode.apply(null,m);case 4:if(t<0)for(n=[];!x();)n.push(e());else for(n=new Array(t),p=0;p<t;++p)n[p]=e();return n;case 5:var d={};for(p=0;p<t||t<0&&!x();++p)d[e()]=e();return d;case 6:return v(e(),t);case 7:switch(t){case 20:return!1;case 21:return!0;case 22:return null;case 23:return E;default:return y(t)}}}();if(b!==t.byteLength)throw"Remaining bytes";return e}};"function"==typeof define&&define.amd?define("cbor/cbor",t):void 0!==n&&n.exports?n.exports=t:e.CBOR||(e.CBOR=t)}(this)},{}],2:[function(e,A,U){!function(M,E){!function(){function h(){this._events={},this._conf&&t.call(this,this._conf)}function t(e){e&&((this._conf=e).delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==g&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function f(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==M&&M.emitWarning?((t=new Error(n)).name="MaxListenersExceededWarning",t.emitter=this,t.count=e,M.emitWarning(t)):(console.error(n),console.trace&&console.trace())}function l(e,t,n){var i=arguments.length;switch(i){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var r=new Array(i);i--;)r[i]=arguments[i];return r}}function n(e,t){for(var n={},i=e.length,r=t?value.length:0,s=0;s<i;s++)n[e[s]]=s<r?t[s]:g;return n}function p(e,t,n){var i,r;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(i=n.on,r=n.off),t.addEventListener?(i=t.addEventListener,r=t.removeEventListener):t.addListener?(i=t.addListener,r=t.removeListener):t.on&&(i=t.on,r=t.off),!i&&!r)throw Error("target does not implement any known event API");if("function"!=typeof i)throw TypeError("on method must be a function");if("function"!=typeof r)throw TypeError("off method must be a function");this._on=i,this._off=r;n=e._observers;n?n.push(this):e._observers=[this]}function m(e,t,n,i){var r=Object.assign({},t);if(!e)return r;if("object"!=typeof e)throw TypeError("options must be an object");var s,o,a,c=Object.keys(e),l=c.length;function u(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<l;h++){if(s=c[h],!i&&!b.call(t,s))throw Error('Unknown "'+s+'" option');(o=e[s])!==g&&(a=n[s],r[s]=a?a(o,u):o)}return r}function i(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function e(r){var s="value must be type of "+r.join("|"),o=r.length,i=r[0],a=r[1];return 1===o?function(e,t){if(typeof e===i)return e;t(s)}:2===o?function(e,t){var n=typeof e;if(n===i||n===a)return e;t(s)}:function(e,t){for(var n=typeof e,i=o;0<i--;)if(n===r[i])return e;t(s)}}function c(o,a,c){var l,u,h,f=0,p=new o(function(t,n,e){function i(){u=u&&null,f&&(clearTimeout(f),f=0)}c=m(c,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),l=!c.overload&&"function"==typeof o.prototype.cancel&&"function"==typeof e;function r(e){i(),t(e)}function s(e){i(),n(e)}l?a(r,s,e):(u=[function(e){s(e||Error("canceled"))}],a(r,s,function(e){if(h)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");u.push(e)}),h=!0),0<c.timeout&&(f=setTimeout(function(){var e=Error("timeout");e.code="ETIMEDOUT",f=0,p.cancel(e),n(e)},c.timeout))});return l||(p.cancel=function(e){if(u){for(var t=u.length,n=1;n<t;n++)u[n](e);u[0](e),u=null}}),p}function d(e){var t=this._observers;if(!t)return-1;for(var n=t.length,i=0;i<n;i++)if(t[i]._target===e)return i;return-1}function _(e,t,n,i,r){if(!n)return null;if(0===i){var s=typeof t;if("string"==s){var o,a,c=0,l=0,u=this.delimiter,h=u.length;if(-1!==(a=t.indexOf(u))){for(o=new Array(5);o[c++]=t.slice(l,a),-1!==(a=t.indexOf(u,l=a+h)););o[c++]=t.slice(l),t=o,r=c}else t=[t],r=1}else r="object"==s?t.length:(t=[t],1)}var f,p,m,d,v,y,g=null,b=t[i],w=t[i+1];if(i===r)n._listeners&&(g=("function"==typeof n._listeners?e&&e.push(n._listeners):e&&e.push.apply(e,n._listeners),[n]));else{if("*"===b){for(a=(v=S(n)).length;0<a--;)"_listeners"!==(f=v[a])&&(y=_(e,t,n[f],i+1,r))&&(g?g.push.apply(g,y):g=y);return g}if("**"===b){for((d=i+1===r||i+2===r&&"*"===w)&&n._listeners&&(g=_(e,t,n,r,r)),a=(v=S(n)).length;0<a--;)"_listeners"!==(f=v[a])&&(y="*"===f||"**"===f?(n[f]._listeners&&!d&&(y=_(e,t,n[f],r,r))&&(g?g.push.apply(g,y):g=y),_(e,t,n[f],i,r)):_(e,t,n[f],f===w?i+2:i,r))&&(g?g.push.apply(g,y):g=y);return g}n[b]&&(g=_(e,t,n[b],i+1,r))}if((s=n["*"])&&_(e,t,s,i+1,r),p=n["**"])if(i<r)for(p._listeners&&_(e,t,p,r,r),a=(v=S(p)).length;0<a--;)"_listeners"!==(f=v[a])&&(f===w?_(e,t,p[f],i+2,r):f===b?_(e,t,p[f],i+1,r):((m={})[f]=p[f],_(e,t,{"**":m},i+1,r)));else p._listeners?_(e,t,p,r,r):p["*"]&&p["*"]._listeners&&_(e,t,p["*"],r,r);return g}function u(e,t,n,i){for(var r,s,o,a=S(e),c=a.length,l=e._listeners;0<c--;)r=e[o=a[c]],s="_listeners"===o?n:n?n.concat(o):[o],o=i||"symbol"==typeof o,l&&t.push(o?s:s.join(this.delimiter)),"object"==typeof r&&u.call(this,r,t,s,o);return t}function v(e){for(var t,n,i,r=S(e),s=r.length;0<s--;)(t=e[n=r[s]])&&(i=!0,"_listeners"===n||v(t)||delete e[n]);return i}function y(e,t,n){this.emitter=e,this.event=t,this.listener=n}function r(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,t.call(this,e)}var g,b,w,k,T,s,x,S,a,o,L;b=Object.hasOwnProperty,w=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},k="object"==typeof M&&"function"==typeof M.nextTick,T="function"==typeof Symbol,s="object"==typeof Reflect,x="function"==typeof E?E:setTimeout,S=T?s&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys,Object.assign(p.prototype,{subscribe:function(n,i,r){function t(){var e=l.apply(null,arguments),t={data:e,name:i,original:n};r?!1!==r.call(o,t)&&a.emit.apply(a,[t.name].concat(e)):a.emit.apply(a,[i].concat(e))}var s=this,o=this._target,a=this._emitter,c=this._listeners;if(c[n])throw Error("Event '"+n+"' is already listening");this._listenersCount++,a._newListener&&a._removeListener&&!s._onNewListener?(this._onNewListener=function(e){e===i&&null===c[n]&&(c[n]=t,s._on.call(o,n,t))},a.on("newListener",this._onNewListener),this._onRemoveListener=function(e){e===i&&!a.hasListeners(e)&&c[n]&&(c[n]=null,s._off.call(o,n,t))},c[n]=null,a.on("removeListener",this._onRemoveListener)):(c[n]=t,s._on.call(o,n,t))},unsubscribe:function(e){var t,n,i,r=this,s=this._listeners,o=this._emitter,a=this._off,c=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function l(){r._onNewListener&&(o.off("newListener",r._onNewListener),o.off("removeListener",r._onRemoveListener),r._onNewListener=null,r._onRemoveListener=null);var e=d.call(o,r);o._observers.splice(e,1)}if(e)(t=s[e])&&(a.call(c,e,t),delete s[e],--this._listenersCount||l());else{for(i=(n=S(s)).length;0<i--;)e=n[i],a.call(c,e,s[e]);this._listeners={},this._listenersCount=0,l()}}}),a=e(["function"]),o=e(["object","function"]),y.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},(r.EventEmitter2=r).prototype.listenTo=function(l,e,u){if("object"!=typeof l)throw TypeError("target musts be an object");var h=this;function t(e){if("object"!=typeof e)throw TypeError("events must be an object");for(var t,n=u.reducers,i=d.call(h,l),r=-1===i?new p(h,l,u):h._observers[i],s=S(e),o=s.length,a="function"==typeof n,c=0;c<o;c++)t=s[c],r.subscribe(t,e[t]||t,a?n:n&&n[t])}return u=m(u,{on:g,off:g,reducers:g},{on:a,off:a,reducers:o}),w(e)?t(n(e)):t("string"==typeof e?n(e.split(/\s+/)):e),this},r.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var i,r=n.length,s=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;0<r--;)i=n[r],e&&i._target!==e||(i.unsubscribe(t),s=!0);return s},r.prototype.delimiter=".",r.prototype.setMaxListeners=function(e){e!==g&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},r.prototype.getMaxListeners=function(){return this._maxListeners},r.prototype.event="",r.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},r.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},r.prototype._once=function(e,t,n,i){return this._many(e,1,t,n,i)},r.prototype.many=function(e,t,n,i){return this._many(e,t,n,!1,i)},r.prototype.prependMany=function(e,t,n,i){return this._many(e,t,n,!0,i)},r.prototype._many=function(e,t,n,i,r){var s=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&s.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,i,r)},r.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e,t,n,i,r,s,o=arguments[0],a=this.wildcard;if("newListener"===o&&!this._newListener&&!this._events.newListener)return!1;if(a&&"newListener"!==(e=o)&&"removeListener"!==o&&"object"==typeof o){if(n=o.length,T)for(i=0;i<n;i++)if("symbol"==typeof o[i]){s=!0;break}s||(o=o.join(this.delimiter))}var c,l=arguments.length;if(this._all&&this._all.length)for(i=0,n=(c=this._all.slice()).length;i<n;i++)switch(this.event=o,l){case 1:c[i].call(this,o);break;case 2:c[i].call(this,o,arguments[1]);break;case 3:c[i].call(this,o,arguments[1],arguments[2]);break;default:c[i].apply(this,arguments)}if(a)_.call(this,c=[],e,this.listenerTree,0,n);else{if("function"==typeof(c=this._events[o])){switch(this.event=o,l){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];c.apply(this,t)}return!0}c=c&&c.slice()}if(c&&c.length){if(3<l)for(t=new Array(l-1),r=1;r<l;r++)t[r-1]=arguments[r];for(i=0,n=c.length;i<n;i++)switch(this.event=o,l){case 1:c[i].call(this);break;case 2:c[i].call(this,arguments[1]);break;case 3:c[i].call(this,arguments[1],arguments[2]);break;default:c[i].apply(this,t)}return!0}if(this.ignoreErrors||this._all||"error"!==o)return!!this._all;throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.")},r.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||h.call(this);var e,t,n,i,r,s,o=arguments[0],a=this.wildcard;if("newListener"===o&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(a&&"newListener"!==(e=o)&&"removeListener"!==o&&"object"==typeof o){if(i=o.length,T)for(r=0;r<i;r++)if("symbol"==typeof o[r]){t=!0;break}t||(o=o.join(this.delimiter))}var c,l=[],u=arguments.length;if(this._all)for(r=0,i=this._all.length;r<i;r++)switch(this.event=o,u){case 1:l.push(this._all[r].call(this,o));break;case 2:l.push(this._all[r].call(this,o,arguments[1]));break;case 3:l.push(this._all[r].call(this,o,arguments[1],arguments[2]));break;default:l.push(this._all[r].apply(this,arguments))}if(a?_.call(this,c=[],e,this.listenerTree,0):c=this._events[o],"function"==typeof c)switch(this.event=o,u){case 1:l.push(c.call(this));break;case 2:l.push(c.call(this,arguments[1]));break;case 3:l.push(c.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(u-1),s=1;s<u;s++)n[s-1]=arguments[s];l.push(c.apply(this,n))}else if(c&&c.length){if(c=c.slice(),3<u)for(n=new Array(u-1),s=1;s<u;s++)n[s-1]=arguments[s];for(r=0,i=c.length;r<i;r++)switch(this.event=o,u){case 1:l.push(c[r].call(this));break;case 2:l.push(c[r].call(this,arguments[1]));break;case 3:l.push(c[r].call(this,arguments[1],arguments[2]));break;default:l.push(c[r].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===o)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(l)},r.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},r.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},r.prototype.onAny=function(e){return this._onAny(e,!1)},r.prototype.prependAny=function(e){return this._onAny(e,!0)},r.prototype.addListener=r.prototype.on,r.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},r.prototype._on=function(e,t,n,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");this._events||h.call(this);var r=this;return i!==g&&(t=(i=function(e,t,n){if(!0===n)r=!0;else if(!1===n)i=!0;else{if(!n||"object"!=typeof n)throw TypeError("options should be an object or true");var i=n.async,r=n.promisify,s=n.nextTick,o=n.objectify}if(i||s||r){var a=t,n=t._origin||t;if(s&&!k)throw Error("process.nextTick is not supported");r===g&&(r="AsyncFunction"===t.constructor.name),(t=function(){var e=arguments,t=this,n=this.event;return r?s?Promise.resolve():new Promise(function(e){x(e)}).then(function(){return t.event=n,a.apply(t,e)}):(s?M.nextTick:x)(function(){t.event=n,a.apply(t,e)})})._async=!0,t._origin=n}return[t,o?new y(this,e,t):this]}.call(this,e,t,i))[0],r=i[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?function(e,t,n){var i,r=0,s=0,o=this.delimiter,a=o.length;if("string"==typeof e)if(-1!==(u=e.indexOf(o))){for(i=new Array(5);i[r++]=e.slice(s,u),-1!==(u=e.indexOf(o,s=u+a)););i[r++]=e.slice(s)}else i=[e],r=1;else r=(i=e).length;if(1<r)for(u=0;u+1<r;u++)if("**"===i[u]&&"**"===i[u+1])return;for(var c,l=this.listenerTree,u=0;u<r;u++)if(l=l[c=i[u]]||(l[c]={}),u===r-1)return l._listeners?("function"==typeof l._listeners&&(l._listeners=[l._listeners]),n?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&0<this._maxListeners&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,f.call(this,l._listeners.length,c))):l._listeners=t,!0;return!0}.call(this,e,t,n):this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&0<this._maxListeners&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,f.call(this,this._events[e].length,e))):this._events[e]=t,r},r.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();if(!(n=_.call(this,null,i,this.listenerTree,0)))return this}else{if(!this._events[e])return this;o=this._events[e],n.push({_listeners:o})}for(var r=0;r<n.length;r++){var s=n[r],o=s._listeners;if(w(o)){for(var a=-1,c=0,l=o.length;c<l;c++)if(o[c]===t||o[c].listener&&o[c].listener===t||o[c]._origin&&o[c]._origin===t){a=c;break}if(!(a<0))return(this.wildcard?s._listeners:this._events[e]).splice(a,1),0===o.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}else(o===t||o.listener&&o.listener===t||o._origin&&o._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&v(this.listenerTree),this},r.prototype.offAny=function(e){var t,n=0,i=0;if(e&&this._all&&0<this._all.length){for(n=0,i=(t=this._all).length;n<i;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,i=t.length;n<i;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},r.prototype.removeListener=r.prototype.off,r.prototype.removeAllListeners=function(e){if(e===g)return this._events&&h.call(this),this;if(this.wildcard){var t,n=_.call(this,null,e,this.listenerTree,0);if(!n)return this;for(t=0;t<n.length;t++)n[t]._listeners=null;this.listenerTree&&v(this.listenerTree)}else this._events&&(this._events[e]=null);return this},r.prototype.listeners=function(e){var t,n,i,r,s,o=this._events;if(e===g){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!o)return[];for(r=(t=S(o)).length,i=[];0<r--;)"function"==typeof(n=o[t[r]])?i.push(n):i.push.apply(i,n);return i}if(this.wildcard){if(!(s=this.listenerTree))return[];var a=[],c="string"==typeof e?e.split(this.delimiter):e.slice();return _.call(this,a,c,s,0),a}return o&&(n=o[e])?"function"==typeof n?[n]:n:[]},r.prototype.eventNames=function(e){var t=this._events;return this.wildcard?u.call(this,this.listenerTree,[],null,e):t?S(t):[]},r.prototype.listenerCount=function(e){return this.listeners(e).length},r.prototype.hasListeners=function(e){if(this.wildcard)return n=[],t="string"==typeof e?e.split(this.delimiter):e.slice(),_.call(this,n,t,this.listenerTree,0),0<n.length;var t=this._events,n=this._all;return!!(n&&n.length||t&&(e===g?S(t).length:t[e]))},r.prototype.listenersAny=function(){return this._all||[]},r.prototype.waitFor=function(r,s){var o=this,e=typeof s;return"number"==e?s={timeout:s}:"function"==e&&(s={filter:s}),c((s=m(s,{timeout:0,filter:g,handleError:!1,Promise:Promise,overload:!1},{filter:a,Promise:i})).Promise,function(t,n,e){function i(){var e=s.filter;e&&!e.apply(o,arguments)||(o.off(r,i),s.handleError?(e=arguments[0])?n(e):t(l.apply(null,arguments).slice(1)):t(l.apply(null,arguments)))}e(function(){o.off(r,i)}),o._on(r,i,!1)},{timeout:s.timeout,overload:s.overload})},L=r.prototype,Object.defineProperties(r,{defaultMaxListeners:{get:function(){return L._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");L._maxListeners=e},enumerable:!0},once:{value:function(o,a,e){return c((e=m(e,{Promise:Promise,timeout:0,overload:!1},{Promise:i})).Promise,function(e,t,n){var i;if("function"==typeof o.addEventListener)return i=function(){e(l.apply(null,arguments))},n(function(){o.removeEventListener(a,i)}),void o.addEventListener(a,i,{once:!0});var r,s=function(){r&&o.removeListener("error",r),e(l.apply(null,arguments))};"error"!==a&&(r=function(e){o.removeListener(a,s),t(e)},o.once("error",r)),n(function(){r&&o.removeListener("error",r),o.removeListener(a,s)}),o.once(a,s)},{timeout:e.timeout,overload:e.overload})},writable:!0,configurable:!0}}),Object.defineProperties(L,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof U?A.exports=r:new Function("","return this")().EventEmitter2=r}.call(this)}.call(this,e("_process"),e("timers").setImmediate)},{_process:4,timers:5}],3:[function(e,t,n){"use strict";var c=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join("")?void 0:1}catch(e){return}}()?Object.assign:function(e,t){for(var n,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++){for(var s in n=Object(arguments[r]))l.call(n,s)&&(i[s]=n[s]);if(c)for(var o=c(n),a=0;a<o.length;a++)u.call(n,o[a])&&(i[o[a]]=n[o[a]])}return i}},{}],4:[function(e,t,n){var i,r,t=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:s}catch(e){i=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){for(var e=a(f),t=(u=!0,l.length);t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,u=!1,!function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return(r=clearTimeout)(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function d(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||u||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],5:[function(c,e,l){!function(n,a){!function(){var i=c("process/browser.js").nextTick,e=Function.prototype.apply,r=Array.prototype.slice,s={},o=0;function t(e,t){this._id=e,this._clearFn=t}l.setTimeout=function(){return new t(e.call(setTimeout,window,arguments),clearTimeout)},l.setInterval=function(){return new t(e.call(setInterval,window,arguments),clearInterval)},l.clearTimeout=l.clearInterval=function(e){e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(window,this._id)},l.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},l.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},l._unrefActive=l.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},l.setImmediate="function"==typeof n?n:function(e){var t=o++,n=!(arguments.length<2)&&r.call(arguments,1);return s[t]=!0,i(function(){s[t]&&(n?e.apply(null,n):e.call(null),l.clearImmediate(t))}),t},l.clearImmediate="function"==typeof a?a:function(e){delete s[e]}}.call(this)}.call(this,c("timers").setImmediate,c("timers").clearImmediate)},{"process/browser.js":4,timers:5}],6:[function(e,t,n){function s(n){var i={};function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=n,r.c=i,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var e=r(r.s=ENTRY_MODULE);return e.default||e}var h="[\\.|\\-|\\+|\\w|/|@]+",f="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+h+").*?\\)";function p(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function m(e,t,n){var i={},r=(i[n]=[],t.toString()),t=r.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!t)return i;for(var s,t=t[1],o=new RegExp("(\\\\n|\\W)"+p(t)+f,"g");s=o.exec(r);)"dll-reference"!==s[3]&&i[n].push(s[3]);for(o=new RegExp("\\("+p(t)+'\\("(dll-reference\\s('+h+'))"\\)\\)'+f,"g");s=o.exec(r);)e[s[2]]||(i[n].push(s[1]),e[s[2]]=__webpack_require__(s[1]).m),i[s[2]]=i[s[2]]||[],i[s[2]].push(s[4]);for(var a,c=Object.keys(i),l=0;l<c.length;l++)for(var u=0;u<i[c[l]].length;u++)a=i[c[l]][u],isNaN(+a)||(i[c[l]][u]=+i[c[l]][u]);return i}function o(e,t){for(var n={main:[t]},i={main:[]},r={main:{}};function(n){return Object.keys(n).reduce(function(e,t){return e||0<n[t].length},!1)}(n);)for(var s=Object.keys(n),o=0;o<s.length;o++){var a=s[o],c=n[a].pop();if(r[a]=r[a]||{},!r[a][c]&&e[a][c]){r[a][c]=!0,i[a]=i[a]||[],i[a].push(c);for(var l=m(e,e[a][c],a),u=Object.keys(l),h=0;h<u.length;h++)n[u[h]]=n[u[h]]||[],n[u[h]]=n[u[h]].concat(l[u[h]])}}return i}t.exports=function(e,t){t=t||{};var n={main:__webpack_modules__},i=t.all?{main:Object.keys(n.main)}:o(n,e),r="",e=(Object.keys(i).filter(function(e){return"main"!==e}).forEach(function(t){for(var e=0;i[t][e];)e++;i[t].push(e),n[t][e]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",r=r+"var "+t+" = ("+s.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i[t].map(function(e){return JSON.stringify(e)+": "+n[t][e].toString()}).join(",")+"});\n"}),r=r+"new (("+s.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map(function(e){return JSON.stringify(e)+": "+n.main[e].toString()}).join(",")+"}))(self);",new window.Blob([r],{type:"text/javascript"}));if(t.bare)return e;t=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(e),e=new window.Worker(t);return e.objectURL=t,e}},{}],7:[function(e,t,n){var f=arguments[3],p=arguments[4],m=arguments[5],d=JSON.stringify;t.exports=function(e,t){for(var n=Object.keys(m),i=0,r=n.length;i<r;i++){var s=n[i],o=m[s].exports;if(o===e||o&&o.default===e){a=s;break}}if(!a){for(var a=Math.floor(Math.pow(16,8)*Math.random()).toString(16),c={},i=0,r=n.length;i<r;i++)c[s=n[i]]=s;p[a]=["function(require,module,exports){"+e+"(self); }",c]}var l=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={},h=(u[a]=a,p[l]=["function(require,module,exports){var f = require("+d(a)+");(f.default ? f.default : f)(self);}",u],{});!function e(t){h[t]=!0;for(var n in p[t][1]){n=p[t][1][n];h[n]||e(n)}}(l);u="("+f+")({"+Object.keys(h).map(function(e){return d(e)+":["+p[e][0]+","+d(p[e][1])+"]"}).join(",")+"},{},["+d(l)+"])",l=window.URL||window.webkitURL||window.mozURL||window.msURL,u=new Blob([u],{type:"text/javascript"});if(t&&t.bare)return u;t=l.createObjectURL(u),l=new Worker(t);return l.objectURL=t,l}},{}],8:[function(e,t,n){var i=this.ROSLIB||{REVISION:"1.3.0"},r=e("object-assign");r(i,e("./core")),r(i,e("./actionlib")),r(i,e("./math")),r(i,e("./tf")),r(i,e("./urdf")),t.exports=i},{"./actionlib":14,"./core":23,"./math":28,"./tf":31,"./urdf":43,"object-assign":3}],9:[function(t,e,n){!function(e){!function(){e.ROSLIB=t("./RosLib")}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./RosLib":8}],10:[function(e,t,n){var i=e("../core/Topic"),r=e("../core/Message"),e=e("eventemitter2").EventEmitter2;function s(e){var n=this,t=(this.ros=(e=e||{}).ros,this.serverName=e.serverName,this.actionName=e.actionName,this.timeout=e.timeout,this.omitFeedback=e.omitFeedback,this.omitStatus=e.omitStatus,this.omitResult=e.omitResult,!(this.goals={}));this.feedbackListener=new i({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.statusListener=new i({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new i({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.goalTopic=new i({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new i({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe(function(e){t=!0,e.status_list.forEach(function(e){var t=n.goals[e.goal_id.id];t&&t.emit("status",e)})}),this.omitFeedback||this.feedbackListener.subscribe(function(e){var t=n.goals[e.status.goal_id.id];t&&(t.emit("status",e.status),t.emit("feedback",e.feedback))}),this.omitResult||this.resultListener.subscribe(function(e){var t=n.goals[e.status.goal_id.id];t&&(t.emit("status",e.status),t.emit("result",e.result))}),this.timeout&&setTimeout(function(){t||n.emit("timeout")},this.timeout)}s.prototype.__proto__=e.prototype,s.prototype.cancel=function(){var e=new r;this.cancelTopic.publish(e)},s.prototype.dispose=function(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()},t.exports=s},{"../core/Message":15,"../core/Topic":22,eventemitter2:2}],11:[function(e,t,n){var s=e("../core/Topic"),e=(e("../core/Message"),e("eventemitter2").EventEmitter2);function i(e){var t=this,e=(this.ros=(e=e||{}).ros,this.serverName=e.serverName,this.actionName=e.actionName,this.timeout=e.timeout,this.omitFeedback=e.omitFeedback,this.omitStatus=e.omitStatus,this.omitResult=e.omitResult,new s({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"})),n=new s({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),i=new s({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),r=new s({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});e.subscribe(function(e){t.emit("goal",e)}),i.subscribe(function(e){e.status_list.forEach(function(e){t.emit("status",e)})}),n.subscribe(function(e){t.emit("status",e.status),t.emit("feedback",e.feedback)}),r.subscribe(function(e){t.emit("status",e.status),t.emit("result",e.result)})}i.prototype.__proto__=e.prototype,t.exports=i},{"../core/Message":15,"../core/Topic":22,eventemitter2:2}],12:[function(e,t,n){var i=e("../core/Message"),e=e("eventemitter2").EventEmitter2;function r(e){var t=this,e=(this.actionClient=e.actionClient,this.goalMessage=e.goalMessage,this.isFinished=!1,new Date);this.goalID="goal_"+Math.random()+"_"+e.getTime(),this.goalMessage=new i({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(e){t.status=e}),this.on("result",function(e){t.isFinished=!0,t.result=e}),this.on("feedback",function(e){t.feedback=e}),this.actionClient.goals[this.goalID]=this}r.prototype.__proto__=e.prototype,r.prototype.send=function(e){var t=this;t.actionClient.goalTopic.publish(t.goalMessage),e&&setTimeout(function(){t.isFinished||t.emit("timeout")},e)},r.prototype.cancel=function(){var e=new i({id:this.goalID});this.actionClient.cancelTopic.publish(e)},t.exports=r},{"../core/Message":15,eventemitter2:2}],13:[function(e,t,n){var s=e("../core/Topic"),o=e("../core/Message"),e=e("eventemitter2").EventEmitter2;function i(e){function t(e,t){return!(e.secs>t.secs)&&(e.secs<t.secs||e.nsecs<t.nsecs)}var n=this,i=(this.ros=(e=e||{}).ros,this.serverName=e.serverName,this.actionName=e.actionName,this.feedbackPublisher=new s({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise(),new s({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"})),e=(i.advertise(),this.resultPublisher=new s({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise(),new s({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"})),r=new s({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new o({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,e.subscribe(function(e){n.currentGoal?(n.nextGoal=e,n.emit("cancel")):(n.statusMessage.status_list=[{goal_id:e.goal_id,status:1}],n.currentGoal=e,n.emit("goal",e.goal))}),r.subscribe(function(e){0===e.stamp.secs&&0===e.stamp.secs&&""===e.id?(n.nextGoal=null,n.currentGoal&&n.emit("cancel")):(n.currentGoal&&e.id===n.currentGoal.goal_id.id?n.emit("cancel"):n.nextGoal&&e.id===n.nextGoal.goal_id.id&&(n.nextGoal=null),n.nextGoal&&t(n.nextGoal.goal_id.stamp,e.stamp)&&(n.nextGoal=null),n.currentGoal&&t(n.currentGoal.goal_id.stamp,e.stamp)&&n.emit("cancel"))}),setInterval(function(){var e=new Date,t=Math.floor(e.getTime()/1e3),e=Math.round(1e9*(e.getTime()/1e3-t));n.statusMessage.header.stamp.secs=t,n.statusMessage.header.stamp.nsecs=e,i.publish(n.statusMessage)},500)}i.prototype.__proto__=e.prototype,i.prototype.setSucceeded=function(e){e=new o({status:{goal_id:this.currentGoal.goal_id,status:3},result:e});this.resultPublisher.publish(e),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},i.prototype.setAborted=function(e){e=new o({status:{goal_id:this.currentGoal.goal_id,status:4},result:e});this.resultPublisher.publish(e),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},i.prototype.sendFeedback=function(e){e=new o({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:e});this.feedbackPublisher.publish(e)},i.prototype.setPreempted=function(){this.statusMessage.status_list=[];var e=new o({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(e),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},t.exports=i},{"../core/Message":15,"../core/Topic":22,eventemitter2:2}],14:[function(e,t,n){var i=e("../core/Ros");e("../mixin")(i,["ActionClient","SimpleActionServer"],t.exports={ActionClient:e("./ActionClient"),ActionListener:e("./ActionListener"),Goal:e("./Goal"),SimpleActionServer:e("./SimpleActionServer")})},{"../core/Ros":17,"../mixin":29,"./ActionClient":10,"./ActionListener":11,"./Goal":12,"./SimpleActionServer":13}],15:[function(e,t,n){var i=e("object-assign");t.exports=function(e){i(this,e)}},{"object-assign":3}],16:[function(e,t,n){var i=e("./Service"),r=e("./ServiceRequest");function s(e){this.ros=(e=e||{}).ros,this.name=e.name}s.prototype.get=function(t){var e=new i({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),n=new r({name:this.name});e.callService(n,function(e){e=JSON.parse(e.value);t(e)})},s.prototype.set=function(e,t){var n=new i({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),e=new r({name:this.name,value:JSON.stringify(e)});n.callService(e,t)},s.prototype.delete=function(e){var t=new i({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),n=new r({name:this.name});t.callService(n,e)},t.exports=s},{"./Service":18,"./ServiceRequest":19}],17:[function(e,t,n){var i=e("ws"),r=e("../util/workerSocket"),s=e("./SocketAdapter.js"),o=e("../util/sharedWorkerSocket"),a=e("./Service"),c=e("./ServiceRequest"),l=e("object-assign"),e=e("eventemitter2").EventEmitter2;function u(e){e=e||{};var t=this;this.socket=null,this.idCounter=0,this.isConnected=!1,this.transportLibrary=e.transportLibrary||"websocket",this.transportOptions=e.transportOptions||{},this._sendFunc=function(e){t.sendEncodedMessage(e)},void 0===e.groovyCompatibility?this.groovyCompatibility=!0:this.groovyCompatibility=e.groovyCompatibility,this.setMaxListeners(0),e.url&&this.connect(e.url)}u.prototype.__proto__=e.prototype,u.prototype.connect=function(e){if("socket.io"===this.transportLibrary)this.socket=l(io(e,{"force new connection":!0}),s(this)),this.socket.on("connect",this.socket.onopen),this.socket.on("data",this.socket.onmessage),this.socket.on("close",this.socket.onclose),this.socket.on("error",this.socket.onerror);else if("RTCPeerConnection"===this.transportLibrary.constructor.name)this.socket=l(this.transportLibrary.createDataChannel(e,this.transportOptions),s(this));else if("websocket"===this.transportLibrary){var t;this.socket&&this.socket.readyState!==i.CLOSED||((t=new i(e)).binaryType="arraybuffer",this.socket=l(t,s(this)))}else if("workersocket"===this.transportLibrary)this.socket=l(new r(e),s(this));else{if("sharedworker"!==this.transportLibrary)throw"Unknown transportLibrary: "+this.transportLibrary.toString();this.socket=l(new o(e),s(this))}},u.prototype.close=function(){this.socket&&this.socket.close()},u.prototype.authenticate=function(e,t,n,i,r,s,o){this.callOnConnection({op:"auth",mac:e,client:t,dest:n,rand:i,t:r,level:s,end:o})},u.prototype.sendEncodedMessage=function(e){var t=null,n=this,t="socket.io"===this.transportLibrary?function(e){n.socket.emit("operation",e)}:function(e){n.socket.send(e)};this.isConnected?t(e):n.once("connection",function(){t(e)})},u.prototype.callOnConnection=function(e){this.transportOptions.encoder?this.transportOptions.encoder(e,this._sendFunc):this._sendFunc(JSON.stringify(e))},u.prototype.setStatusLevel=function(e,t){this.callOnConnection({op:"set_level",level:e,id:t})},u.prototype.getActionServers=function(t,n){var e=new a({ros:this,name:"/rosapi/action_servers",serviceType:"rosapi/GetActionServers"}),i=new c({});"function"==typeof n?e.callService(i,function(e){t(e.action_servers)},function(e){n(e)}):e.callService(i,function(e){t(e.action_servers)})},u.prototype.getTopics=function(t,n){var e=new a({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),i=new c;"function"==typeof n?e.callService(i,function(e){t(e)},function(e){n(e)}):e.callService(i,function(e){t(e)})},u.prototype.getTopicsForType=function(e,t,n){var i=new a({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),e=new c({type:e});"function"==typeof n?i.callService(e,function(e){t(e.topics)},function(e){n(e)}):i.callService(e,function(e){t(e.topics)})},u.prototype.getServices=function(t,n){var e=new a({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),i=new c;"function"==typeof n?e.callService(i,function(e){t(e.services)},function(e){n(e)}):e.callService(i,function(e){t(e.services)})},u.prototype.getServicesForType=function(e,t,n){var i=new a({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),e=new c({type:e});"function"==typeof n?i.callService(e,function(e){t(e.services)},function(e){n(e)}):i.callService(e,function(e){t(e.services)})},u.prototype.getServiceRequestDetails=function(e,t,n){var i=new a({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),e=new c({type:e});"function"==typeof n?i.callService(e,function(e){t(e)},function(e){n(e)}):i.callService(e,function(e){t(e)})},u.prototype.getServiceResponseDetails=function(e,t,n){var i=new a({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),e=new c({type:e});"function"==typeof n?i.callService(e,function(e){t(e)},function(e){n(e)}):i.callService(e,function(e){t(e)})},u.prototype.getNodes=function(t,n){var e=new a({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),i=new c;"function"==typeof n?e.callService(i,function(e){t(e.nodes)},function(e){n(e)}):e.callService(i,function(e){t(e.nodes)})},u.prototype.getNodeDetails=function(e,t,n){var i=new a({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),e=new c({node:e});"function"==typeof n?i.callService(e,function(e){t(e.subscribing,e.publishing,e.services)},function(e){n(e)}):i.callService(e,function(e){t(e)})},u.prototype.getParams=function(t,n){var e=new a({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),i=new c;"function"==typeof n?e.callService(i,function(e){t(e.names)},function(e){n(e)}):e.callService(i,function(e){t(e.names)})},u.prototype.getTopicType=function(e,t,n){var i=new a({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),e=new c({topic:e});"function"==typeof n?i.callService(e,function(e){t(e.type)},function(e){n(e)}):i.callService(e,function(e){t(e.type)})},u.prototype.getServiceType=function(e,t,n){var i=new a({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),e=new c({service:e});"function"==typeof n?i.callService(e,function(e){t(e.type)},function(e){n(e)}):i.callService(e,function(e){t(e.type)})},u.prototype.getMessageDetails=function(e,t,n){var i=new a({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),e=new c({type:e});"function"==typeof n?i.callService(e,function(e){t(e.typedefs)},function(e){n(e)}):i.callService(e,function(e){t(e.typedefs)})},u.prototype.decodeTypeDefs=function(e){function u(e,t){for(var n={},i=0;i<e.fieldnames.length;i++){var r=e.fieldarraylen[i],s=e.fieldnames[i],o=e.fieldtypes[i];if(-1===o.indexOf("/"))n[s]=-1===r?o:[o];else{for(var a,c=!1,l=0;l<t.length;l++)if(t[l].type.toString()===o.toString()){c=t[l];break}c?(a=u(c,t),-1!==r&&(n[s]=[a])):h.emit("error","Cannot find "+o+" in decodeTypeDefs")}}return n}var h=this;return u(e[0],e)},u.prototype.getTopicsAndRawTypes=function(t,n){var e=new a({ros:this,name:"/rosapi/topics_and_raw_types",serviceType:"rosapi/TopicsAndRawTypes"}),i=new c;"function"==typeof n?e.callService(i,function(e){t(e)},function(e){n(e)}):e.callService(i,function(e){t(e)})},t.exports=u},{"../util/sharedWorkerSocket":45,"../util/workerSocket":50,"./Service":18,"./ServiceRequest":19,"./SocketAdapter.js":21,eventemitter2:2,"object-assign":3,ws:47}],18:[function(e,t,n){var r=e("./ServiceResponse"),e=(e("./ServiceRequest"),e("eventemitter2").EventEmitter2);function i(e){this.ros=(e=e||{}).ros,this.name=e.name,this.serviceType=e.serviceType,this.isAdvertised=!1,this._serviceCallback=null}i.prototype.__proto__=e.prototype,i.prototype.callService=function(e,t,n){var i;this.isAdvertised||(i="call_service:"+this.name+":"+ ++this.ros.idCounter,(t||n)&&this.ros.once(i,function(e){void 0!==e.result&&!1===e.result?"function"==typeof n&&n(e.values):"function"==typeof t&&t(new r(e.values))}),i={op:"call_service",id:i,service:this.name,type:this.serviceType,args:e},this.ros.callOnConnection(i))},i.prototype.advertise=function(e){this.isAdvertised||"function"!=typeof e||(this._serviceCallback=e,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},i.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},i.prototype._serviceResponse=function(e){var t={},n=this._serviceCallback(e.args,t),t={op:"service_response",service:this.name,values:new r(t),result:n};e.id&&(t.id=e.id),this.ros.callOnConnection(t)},t.exports=i},{"./ServiceRequest":19,"./ServiceResponse":20,eventemitter2:2}],19:[function(e,t,n){var i=e("object-assign");t.exports=function(e){i(this,e)}},{"object-assign":3}],20:[function(e,t,n){var i=e("object-assign");t.exports=function(e){i(this,e)}},{"object-assign":3}],21:[function(e,t,n){"use strict";var i=e("../util/decompressPng"),a=e("cbor-js"),c=e("../util/cborTypedArrayTags"),l=null;"undefined"!=typeof bson&&(l=bson().BSON),t.exports=function(t){var r=null;function s(e){"publish"===e.op?t.emit(e.topic,e.msg):"service_response"===e.op?t.emit(e.id,e):"call_service"===e.op?t.emit(e.service,e):"status"===e.op&&(e.id?t.emit("status:"+e.id,e):t.emit("status",e))}function o(e,t){"png"===e.op?i(e.data,t):t(e)}return t.transportOptions.decoder&&(r=t.transportOptions.decoder),{onopen:function(e){t.isConnected=!0,t.emit("connection",e)},onclose:function(e){t.isConnected=!1,t.emit("close",e)},onerror:function(e){t.emit("error",e)},onmessage:function(e){if(r)r(e.data,function(e){s(e)});else if("undefined"!=typeof Blob&&e.data instanceof Blob){var t=e.data,n=function(e){o(e,s)};if(!l)throw"Cannot process BSON encoded message without BSON header.";var i=new FileReader;i.onload=function(){var e=new Uint8Array(this.result),e=l.deserialize(e);n(e)},i.readAsArrayBuffer(t)}else e.data instanceof ArrayBuffer?s(a.decode(e.data,c)):o(JSON.parse("string"==typeof e?e:e.data),s)}}}},{"../util/cborTypedArrayTags":44,"../util/decompressPng":49,"cbor-js":1}],22:[function(e,t,n){var i=e("eventemitter2").EventEmitter2,r=e("./Message");function s(e){this.ros=(e=e||{}).ros,this.name=e.name,this.messageType=e.messageType,this.isAdvertised=!1,this.compression=e.compression||"none",this.throttle_rate=e.throttle_rate||0,this.latch=e.latch||!1,this.queue_size=e.queue_size||100,this.queue_length=e.queue_length||0,this.reconnect_on_close=void 0===e.reconnect_on_close||e.reconnect_on_close,this.compression&&"png"!==this.compression&&"cbor"!==this.compression&&"cbor-raw"!==this.compression&&"none"!==this.compression&&(this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var t=this;this.reconnect_on_close?this.callForSubscribeAndAdvertise=function(e){t.ros.callOnConnection(e),t.waitForReconnect=!1,t.reconnectFunc=function(){t.waitForReconnect||(t.waitForReconnect=!0,t.ros.callOnConnection(e),t.ros.once("connection",function(){t.waitForReconnect=!1}))},t.ros.on("close",t.reconnectFunc)}:this.callForSubscribeAndAdvertise=this.ros.callOnConnection,this._messageCallback=function(e){t.emit("message",new r(e))}}s.prototype.__proto__=i.prototype,s.prototype.subscribe=function(e){"function"==typeof e&&this.on("message",e),this.subscribeId||(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},s.prototype.unsubscribe=function(e){e&&(this.off("message",e),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},s.prototype.advertise=function(){var e;this.isAdvertised||(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,this.reconnect_on_close||(e=this).ros.on("close",function(){e.isAdvertised=!1}))},s.prototype.unadvertise=function(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},s.prototype.publish=function(e){this.isAdvertised||this.advertise(),this.ros.idCounter++;e={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:e,latch:this.latch};this.ros.callOnConnection(e)},t.exports=s},{"./Message":15,eventemitter2:2}],23:[function(e,t,n){var i=e("../mixin"),t=t.exports={Ros:e("./Ros"),Topic:e("./Topic"),Message:e("./Message"),Param:e("./Param"),Service:e("./Service"),ServiceRequest:e("./ServiceRequest"),ServiceResponse:e("./ServiceResponse")};i(t.Ros,["Param","Service","Topic"],t)},{"../mixin":29,"./Message":15,"./Param":16,"./Ros":17,"./Service":18,"./ServiceRequest":19,"./ServiceResponse":20,"./Topic":22}],24:[function(e,t,n){var i=e("./Vector3"),r=e("./Quaternion");function s(e){this.position=new i((e=e||{}).position),this.orientation=new r(e.orientation)}s.prototype.applyTransform=function(e){this.position.multiplyQuaternion(e.rotation),this.position.add(e.translation);e=e.rotation.clone();e.multiply(this.orientation),this.orientation=e},s.prototype.clone=function(){return new s(this)},s.prototype.multiply=function(e){e=e.clone();return e.applyTransform({rotation:this.orientation,translation:this.position}),e},s.prototype.getInverse=function(){var e=this.clone();return e.orientation.invert(),e.position.multiplyQuaternion(e.orientation),e.position.x*=-1,e.position.y*=-1,e.position.z*=-1,e},t.exports=s},{"./Quaternion":25,"./Vector3":27}],25:[function(e,t,n){function i(e){this.x=(e=e||{}).x||0,this.y=e.y||0,this.z=e.z||0,this.w="number"==typeof e.w?e.w:1}i.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},i.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},i.prototype.normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(this.x=this.x*(e=1/e),this.y=this.y*e,this.z=this.z*e,this.w=this.w*e)},i.prototype.invert=function(){this.conjugate(),this.normalize()},i.prototype.multiply=function(e){var t=this.x*e.w+this.y*e.z-this.z*e.y+this.w*e.x,n=-this.x*e.z+this.y*e.w+this.z*e.x+this.w*e.y,i=this.x*e.y-this.y*e.x+this.z*e.w+this.w*e.z,e=-this.x*e.x-this.y*e.y-this.z*e.z+this.w*e.w;this.x=t,this.y=n,this.z=i,this.w=e},i.prototype.clone=function(){return new i(this)},t.exports=i},{}],26:[function(e,t,n){var i=e("./Vector3"),r=e("./Quaternion");function s(e){this.translation=new i((e=e||{}).translation),this.rotation=new r(e.rotation)}s.prototype.clone=function(){return new s(this)},t.exports=s},{"./Quaternion":25,"./Vector3":27}],27:[function(e,t,n){function i(e){this.x=(e=e||{}).x||0,this.y=e.y||0,this.z=e.z||0}i.prototype.add=function(e){this.x+=e.x,this.y+=e.y,this.z+=e.z},i.prototype.subtract=function(e){this.x-=e.x,this.y-=e.y,this.z-=e.z},i.prototype.multiplyQuaternion=function(e){var t=e.w*this.x+e.y*this.z-e.z*this.y,n=e.w*this.y+e.z*this.x-e.x*this.z,i=e.w*this.z+e.x*this.y-e.y*this.x,r=-e.x*this.x-e.y*this.y-e.z*this.z;this.x=t*e.w+r*-e.x+n*-e.z-i*-e.y,this.y=n*e.w+r*-e.y+i*-e.x-t*-e.z,this.z=i*e.w+r*-e.z+t*-e.y-n*-e.x},i.prototype.clone=function(){return new i(this)},t.exports=i},{}],28:[function(e,t,n){t.exports={Pose:e("./Pose"),Quaternion:e("./Quaternion"),Transform:e("./Transform"),Vector3:e("./Vector3")}},{"./Pose":24,"./Quaternion":25,"./Transform":26,"./Vector3":27}],29:[function(e,t,n){t.exports=function(n,e,i){e.forEach(function(e){var t=i[e];n.prototype[e]=function(e){return e.ros=this,new t(e)}})}},{}],30:[function(e,t,n){var i=e("../actionlib/ActionClient"),r=e("../actionlib/Goal"),s=e("../core/Service.js"),o=e("../core/ServiceRequest.js"),a=e("../core/Topic.js"),c=e("../math/Transform");function l(e){this.ros=(e=e||{}).ros,this.fixedFrame=e.fixedFrame||"/base_link",this.angularThres=e.angularThres||2,this.transThres=e.transThres||.01,this.rate=e.rate||10,this.updateDelay=e.updateDelay||50;var t=e.topicTimeout||2,n=Math.floor(t),t=Math.floor(1e9*(t-n));this.topicTimeout={secs:n,nsecs:t},this.serverName=e.serverName||"/tf2_web_republisher",this.repubServiceName=e.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this._subscribeCB=null,this._isDisposed=!1,this.actionClient=new i({ros:e.ros,serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=new s({ros:e.ros,name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}l.prototype.processTFArray=function(e){e.transforms.forEach(function(e){var t=e.child_frame_id,n=("/"===t[0]&&(t=t.substring(1)),this.frameInfos[t]);n&&(n.transform=new c({translation:e.transform.translation,rotation:e.transform.rotation}),n.cbs.forEach(function(e){e(n.transform)}))},this)},l.prototype.updateGoal=function(){var e={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};this.ros.groovyCompatibility?(this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new r({actionClient:this.actionClient,goalMessage:e}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send()):(e.timeout=this.topicTimeout,e=new o(e),this.serviceClient.callService(e,this.processResponse.bind(this))),this.republisherUpdateRequested=!1},l.prototype.processResponse=function(e){this._isDisposed||(this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB),this.currentTopic=new a({ros:this.ros,name:e.topic_name,messageType:"tf2_web_republisher/TFArray"}),this._subscribeCB=this.processTFArray.bind(this),this.currentTopic.subscribe(this._subscribeCB))},l.prototype.subscribe=function(e,t){"/"===e[0]&&(e=e.substring(1)),this.frameInfos[e]?this.frameInfos[e].transform&&t(this.frameInfos[e].transform):(this.frameInfos[e]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[e].cbs.push(t)},l.prototype.unsubscribe=function(e,t){"/"===e[0]&&(e=e.substring(1));for(var n=this.frameInfos[e],i=n&&n.cbs||[],r=i.length;r--;)i[r]===t&&i.splice(r,1);t&&0!==i.length||delete this.frameInfos[e]},l.prototype.dispose=function(){this._isDisposed=!0,this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB)},t.exports=l},{"../actionlib/ActionClient":10,"../actionlib/Goal":12,"../core/Service.js":18,"../core/ServiceRequest.js":19,"../core/Topic.js":22,"../math/Transform":26}],31:[function(e,t,n){var i=e("../core/Ros");e("../mixin")(i,["TFClient"],t.exports={TFClient:e("./TFClient")})},{"../core/Ros":17,"../mixin":29,"./TFClient":30}],32:[function(e,t,n){var i=e("../math/Vector3"),r=e("./UrdfTypes");t.exports=function(e){this.dimension=null,this.type=r.URDF_BOX,e=e.xml.getAttribute("size").split(" "),this.dimension=new i({x:parseFloat(e[0]),y:parseFloat(e[1]),z:parseFloat(e[2])})}},{"../math/Vector3":27,"./UrdfTypes":41}],33:[function(e,t,n){t.exports=function(e){e=e.xml.getAttribute("rgba").split(" "),this.r=parseFloat(e[0]),this.g=parseFloat(e[1]),this.b=parseFloat(e[2]),this.a=parseFloat(e[3])}},{}],34:[function(e,t,n){var i=e("./UrdfTypes");t.exports=function(e){this.type=i.URDF_CYLINDER,this.length=parseFloat(e.xml.getAttribute("length")),this.radius=parseFloat(e.xml.getAttribute("radius"))}},{"./UrdfTypes":41}],35:[function(e,t,n){var c=e("../math/Pose"),l=e("../math/Vector3"),u=e("../math/Quaternion");t.exports=function(e){this.name=e.xml.getAttribute("name"),this.type=e.xml.getAttribute("type");var t,n,i,r,s,o,a=e.xml.getElementsByTagName("parent");0<a.length&&(this.parent=a[0].getAttribute("link")),0<(a=e.xml.getElementsByTagName("child")).length&&(this.child=a[0].getAttribute("link")),0<(a=e.xml.getElementsByTagName("limit")).length&&(this.minval=parseFloat(a[0].getAttribute("lower")),this.maxval=parseFloat(a[0].getAttribute("upper"))),0===(a=e.xml.getElementsByTagName("origin")).length?this.origin=new c:(e=a[0].getAttribute("xyz"),t=new l,e&&(e=e.split(" "),t=new l({x:parseFloat(e[0]),y:parseFloat(e[1]),z:parseFloat(e[2])})),e=a[0].getAttribute("rpy"),a=new u,e&&(e=e.split(" "),o=parseFloat(e[0])/2,n=parseFloat(e[1])/2,e=parseFloat(e[2])/2,i=Math.sin(o)*Math.cos(n)*Math.cos(e)-Math.cos(o)*Math.sin(n)*Math.sin(e),r=Math.cos(o)*Math.sin(n)*Math.cos(e)+Math.sin(o)*Math.cos(n)*Math.sin(e),s=Math.cos(o)*Math.cos(n)*Math.sin(e)-Math.sin(o)*Math.sin(n)*Math.cos(e),o=Math.cos(o)*Math.cos(n)*Math.cos(e)+Math.sin(o)*Math.sin(n)*Math.sin(e),(a=new u({x:i,y:r,z:s,w:o})).normalize()),this.origin=new c({position:t,orientation:a}))}},{"../math/Pose":24,"../math/Quaternion":25,"../math/Vector3":27}],36:[function(e,t,n){var i=e("./UrdfVisual");t.exports=function(e){this.name=e.xml.getAttribute("name"),this.visuals=[];for(var t=e.xml.getElementsByTagName("visual"),n=0;n<t.length;n++)this.visuals.push(new i({xml:t[n]}))}},{"./UrdfVisual":42}],37:[function(e,t,n){var i=e("./UrdfColor");function r(e){this.textureFilename=null,this.color=null,this.name=e.xml.getAttribute("name");var t=e.xml.getElementsByTagName("texture"),t=(0<t.length&&(this.textureFilename=t[0].getAttribute("filename")),e.xml.getElementsByTagName("color"));0<t.length&&(this.color=new i({xml:t[0]}))}r.prototype.isLink=function(){return null===this.color&&null===this.textureFilename};var s=e("object-assign");r.prototype.assign=function(e){return s(this,e)},t.exports=r},{"./UrdfColor":33,"object-assign":3}],38:[function(e,t,n){var i=e("../math/Vector3"),r=e("./UrdfTypes");t.exports=function(e){this.scale=null,this.type=r.URDF_MESH,this.filename=e.xml.getAttribute("filename"),(e=e.xml.getAttribute("scale"))&&(e=e.split(" "),this.scale=new i({x:parseFloat(e[0]),y:parseFloat(e[1]),z:parseFloat(e[2])}))}},{"../math/Vector3":27,"./UrdfTypes":41}],39:[function(e,t,n){var l=e("./UrdfMaterial"),u=e("./UrdfLink"),h=e("./UrdfJoint"),f=e("@xmldom/xmldom").DOMParser;t.exports=function(e){var t=(e=e||{}).xml,e=e.string,e=(this.materials={},this.links={},this.joints={},(t=e?(new f).parseFromString(e,"text/xml"):t).documentElement);this.name=e.getAttribute("name");for(var n=e.childNodes,i=0;i<n.length;i++){var r=n[i];if("material"===r.tagName){var s=new l({xml:r});void 0!==this.materials[s.name]?this.materials[s.name].isLink()?this.materials[s.name].assign(s):console.warn("Material "+s.name+"is not unique."):this.materials[s.name]=s}else if("link"===r.tagName){var o=new u({xml:r});if(void 0!==this.links[o.name])console.warn("Link "+o.name+" is not unique.");else{for(var a=0;a<o.visuals.length;a++){var c=o.visuals[a].material;null!==c&&c.name&&(void 0!==this.materials[c.name]?o.visuals[a].material=this.materials[c.name]:this.materials[c.name]=c)}this.links[o.name]=o}}else"joint"===r.tagName&&(s=new h({xml:r}),this.joints[s.name]=s)}}},{"./UrdfJoint":35,"./UrdfLink":36,"./UrdfMaterial":37,"@xmldom/xmldom":46}],40:[function(e,t,n){var i=e("./UrdfTypes");t.exports=function(e){this.type=i.URDF_SPHERE,this.radius=parseFloat(e.xml.getAttribute("radius"))}},{"./UrdfTypes":41}],41:[function(e,t,n){t.exports={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}},{}],42:[function(e,t,n){var p=e("../math/Pose"),m=e("../math/Vector3"),d=e("../math/Quaternion"),v=e("./UrdfCylinder"),y=e("./UrdfBox"),g=e("./UrdfMaterial"),b=e("./UrdfMesh"),w=e("./UrdfSphere");t.exports=function(e){var t,n,i,r,s=e.xml;this.origin=null,this.geometry=null,this.material=null,this.name=e.xml.getAttribute("name");0===(e=s.getElementsByTagName("origin")).length?this.origin=new p:(h=e[0].getAttribute("xyz"),t=new m,h&&(h=h.split(" "),t=new m({x:parseFloat(h[0]),y:parseFloat(h[1]),z:parseFloat(h[2])})),h=e[0].getAttribute("rpy"),e=new d,h&&(h=h.split(" "),r=parseFloat(h[0])/2,o=parseFloat(h[1])/2,h=parseFloat(h[2])/2,f=Math.sin(r)*Math.cos(o)*Math.cos(h)-Math.cos(r)*Math.sin(o)*Math.sin(h),n=Math.cos(r)*Math.sin(o)*Math.cos(h)+Math.sin(r)*Math.cos(o)*Math.sin(h),i=Math.cos(r)*Math.cos(o)*Math.sin(h)-Math.sin(r)*Math.sin(o)*Math.cos(h),r=Math.cos(r)*Math.cos(o)*Math.cos(h)+Math.sin(r)*Math.sin(o)*Math.sin(h),(e=new d({x:f,y:n,z:i,w:r})).normalize()),this.origin=new p({position:t,orientation:e}));var o=s.getElementsByTagName("geometry");if(0<o.length){for(var a=o[0],c=null,l=0;l<a.childNodes.length;l++){var u=a.childNodes[l];if(1===u.nodeType){c=u;break}}var h=c.nodeName;"sphere"===h?this.geometry=new w({xml:c}):"box"===h?this.geometry=new y({xml:c}):"cylinder"===h?this.geometry=new v({xml:c}):"mesh"===h?this.geometry=new b({xml:c}):console.warn("Unknown geometry type "+h)}var f=s.getElementsByTagName("material");0<f.length&&(this.material=new g({xml:f[0]}))}},{"../math/Pose":24,"../math/Quaternion":25,"../math/Vector3":27,"./UrdfBox":32,"./UrdfCylinder":34,"./UrdfMaterial":37,"./UrdfMesh":38,"./UrdfSphere":40}],43:[function(e,t,n){t.exports=e("object-assign")({UrdfBox:e("./UrdfBox"),UrdfColor:e("./UrdfColor"),UrdfCylinder:e("./UrdfCylinder"),UrdfLink:e("./UrdfLink"),UrdfMaterial:e("./UrdfMaterial"),UrdfMesh:e("./UrdfMesh"),UrdfModel:e("./UrdfModel"),UrdfSphere:e("./UrdfSphere"),UrdfVisual:e("./UrdfVisual")},e("./UrdfTypes"))},{"./UrdfBox":32,"./UrdfColor":33,"./UrdfCylinder":34,"./UrdfLink":36,"./UrdfMaterial":37,"./UrdfMesh":38,"./UrdfModel":39,"./UrdfSphere":40,"./UrdfTypes":41,"./UrdfVisual":42,"object-assign":3}],44:[function(e,t,n){"use strict";var u=Math.pow(2,32),i=!1;function h(){i||(i=!0,console.warn("CBOR 64-bit integer array values may lose precision. No further warnings."))}var r={64:Uint8Array,69:Uint16Array,70:Uint32Array,72:Int8Array,77:Int16Array,78:Int32Array,85:Float32Array,86:Float64Array},s={71:function(e){h();for(var t=e.byteLength,n=e.byteOffset,i=t/8,e=e.buffer.slice(n,n+t),r=new Uint32Array(e),s=new Array(i),o=0;o<i;o++){var a=2*o,c=r[a],a=r[1+a];s[o]=c+u*a}return s},79:function(e){h();for(var t=e.byteLength,n=e.byteOffset,i=t/8,e=e.buffer.slice(n,n+t),r=new Uint32Array(e),s=new Int32Array(e),o=new Array(i),a=0;a<i;a++){var c=2*a,l=r[c],c=s[1+c];o[a]=l+u*c}return o}};void 0!==t&&t.exports&&(t.exports=function(e,t){var n,i;return t in r?(n=e.byteLength,i=e.byteOffset,new r[t](e.buffer.slice(i,i+n))):t in s?s[t](e):e})},{}],45:[function(e,t,n){function i(e){if("undefined"==typeof window)throw new Error("SharedWorkerConnection can only be used in a browser");if(void 0===window.SharedWorker)throw new Error("SharedWorker is not supported in this browser");var t=window.btoa(window.unescape(window.encodeURIComponent("/*global onconnect: true*/\n/*global WebSocket*/\nvar websocket;\nvar allPorts = [];\n\nfunction handleSocketMessage(ev) {\n    var data = ev.data;\n    if (data instanceof ArrayBuffer) {\n        // binary message, transfer for speed\n        for (var p = 0; p < allPorts.length; p++) {\n            allPorts[p].postMessage(data, [data]);\n        }\n    } else {\n        // JSON message, copy string\n        broadcastToAllPorts(data);\n    }\n}\n\nfunction handleSocketControl(ev) {\n    broadcastToAllPorts({ type: ev.type });\n    if (ev.type === 'close' && websocket !== undefined) {\n        websocket.close();\n        websocket = undefined;\n        for (var p = 0; p < allPorts.length; p++) {\n            allPorts[p].close();\n        }\n        allPorts = [];\n    }\n}\n\n/**\n * @param {MessageEvent} messageEvent\n */\nfunction onMessageFromMainThread(messageEvent) {\n    switch (messageEvent.data.type) {\n        case 'CONNECT':\n            var mustCreateANewWebSocket = false;\n            if (websocket === undefined) {\n                mustCreateANewWebSocket = true;\n            } else if (websocket.url !== messageEvent.data.uri) {\n                // Compare urls figures without special characters to compare websocket url and message url ip and port\n                // Ex: websocket url = ws://127.0.0.1:9090 and message url = ws://127.0.0.1:9090/ strings are differents\n                // but ip and port remain the same\n                var numbersExrtactedFromWebsocketURL = websocket.url.match(/\\d/g);\n                numbersExrtactedFromWebsocketURL = numbersExrtactedFromWebsocketURL.join('');\n                var numbersExrtactedFromMessageURL = messageEvent.data.uri.match(/\\d/g);\n                numbersExrtactedFromMessageURL = numbersExrtactedFromMessageURL.join('');\n                if(numbersExrtactedFromWebsocketURL !== numbersExrtactedFromMessageURL){\n                    websocket.close();\n                    mustCreateANewWebSocket = true;\n                }\n            }\n            if (mustCreateANewWebSocket) {\n                websocket = new WebSocket(messageEvent.data.uri);\n                websocket.binaryType = 'arraybuffer';\n                websocket.onmessage = handleSocketMessage;\n                websocket.onclose = handleSocketControl;\n                websocket.onopen = handleSocketControl;\n                websocket.onerror = handleSocketControl;\n            } else {\n                if (websocket.readyState === WebSocket.OPEN) {\n                    messageEvent.currentTarget.postMessage({ type: 'open' });\n                }\n            }\n            break;\n        case 'WRITE':\n            if (websocket !== undefined && websocket.readyState === WebSocket.OPEN) {\n                websocket.send(messageEvent.data.dataToWrite);\n            }\n            break;\n        case 'CLOSE':\n            var portToRemove = messageEvent.currentTarget;\n            var index = allPorts.indexOf(portToRemove);\n            if (index > -1) {\n                allPorts.splice(index, 1);\n            }\n            // Paranoïd check :\n            // If allPorts became empty the browser will shutdown\n            // this worker.\n            if (allPorts.length === 0) {\n                websocket.close();\n                websocket = undefined;\n            }\n            break;\n    }\n}\n\n/**\n * @param {MessageEvent} messageEvent\n */\nonconnect = function (messageEvent) {\n    var port = messageEvent.ports[0];\n    allPorts.push(port);\n    port.onmessage = onMessageFromMainThread;\n};\n\nfunction broadcastToAllPorts(msg) {\n    for (var p = 0; p < allPorts.length; p++) {\n        allPorts[p].postMessage(msg);\n    }\n}\n"))),n=(this.worker_=new window.SharedWorker("data:application/javascript;base64,"+t),this.worker_.port.start(),this.worker_.port.postMessage({type:"CONNECT",uri:e}),this);this.worker_.port.onmessage=function(e){n.handleWorkerMessage_(e)}}i.prototype.send=function(e){this.worker_.port.postMessage({type:"WRITE",dataToWrite:e})},i.prototype.handleWorkerMessage_=function(e){var t=e.data;if(t instanceof ArrayBuffer||"string"==typeof t)this.onmessage(e);else{e=t.type;if("close"===e)this.onclose(null);else if("open"===e)this.onopen(null);else{if("error"!==e)throw"Unknown message from workersocket";this.onerror(null)}}},i.prototype.close=function(){this.worker_.port.postMessage({type:"CLOSE"})},t.exports=i},{}],46:[function(e,t,n){n.DOMImplementation=window.DOMImplementation,n.XMLSerializer=window.XMLSerializer,n.DOMParser=window.DOMParser},{}],47:[function(e,t,n){t.exports="undefined"!=typeof window?window.WebSocket:WebSocket},{}],48:[function(e,t,n){t.exports=function(){return document.createElement("canvas")}},{}],49:[function(e,t,n){"use strict";var a=e("canvas"),i=a.Image||window.Image;t.exports=function(e,s){var o=new i;o.onload=function(){for(var e=new a,t=e.getContext("2d"),n=(e.width=o.width,e.height=o.height,t.imageSmoothingEnabled=!1,t.webkitImageSmoothingEnabled=!1,t.mozImageSmoothingEnabled=!1,t.drawImage(o,0,0),t.getImageData(0,0,o.width,o.height).data),i="",r=0;r<n.length;r+=4)i+=String.fromCharCode(n[r],n[r+1],n[r+2]);s(JSON.parse(i))},o.src="data:image/png;base64,"+e}},{canvas:48}],50:[function(t,e,n){try{var i=t("webworkify")}catch(e){i=t("webworkify-webpack")}var r=t("./workerSocketImpl");function s(e){this.socket_=i(r),this.socket_.addEventListener("message",this.handleWorkerMessage_.bind(this)),this.socket_.postMessage({uri:e})}s.prototype.handleWorkerMessage_=function(e){var t=e.data;if(t instanceof ArrayBuffer||"string"==typeof t)this.onmessage(e);else{e=t.type;if("close"===e)this.onclose(null);else if("open"===e)this.onopen(null);else{if("error"!==e)throw"Unknown message from workersocket";this.onerror(null)}}},s.prototype.send=function(e){this.socket_.postMessage(e)},s.prototype.close=function(){this.socket_.postMessage({close:!0})},e.exports=s},{"./workerSocketImpl":51,webworkify:7,"webworkify-webpack":6}],51:[function(e,t,n){var s=e("ws");t.exports=function(t){var n=null;function i(e){e=e.data;e instanceof ArrayBuffer?t.postMessage(e,[e]):t.postMessage(e)}function r(e){t.postMessage({type:e.type})}t.addEventListener("message",function(e){e=e.data;if("string"==typeof e)n.send(e);else if(e.hasOwnProperty("close"))n.close(),n=null;else{if(!e.hasOwnProperty("uri"))throw"Unknown message to WorkerSocket";e=e.uri;(n=new s(e)).binaryType="arraybuffer",n.onmessage=i,n.onclose=r,n.onopen=r,n.onerror=r}})}},{ws:47}]},{},[9]);